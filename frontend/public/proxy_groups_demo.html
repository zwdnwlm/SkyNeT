<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyNeT ä»£ç†åˆ†ç»„çŠ¶æ€ Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #050505;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        .glass-card {
            background: rgba(30, 30, 30, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
        }
        .group-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.15s;
        }
        .group-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }
        .delay-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-family: monospace; }
        .delay-green { background: rgba(34, 197, 94, 0.15); color: #4ade80; }
        .delay-yellow { background: rgba(234, 179, 8, 0.15); color: #facc15; }
        .delay-red { background: rgba(239, 68, 68, 0.15); color: #f87171; }
        .settings-modal, .node-selector {
            background: rgba(20, 20, 20, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 3px; }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex flex-col gap-6 items-center justify-center">

    <div class="glass-card p-4 sm:p-5 w-full max-w-5xl relative">
        <!-- æ ‡é¢˜æ  -->
        <div class="flex items-center justify-between mb-4 gap-4">
            <div class="flex items-center gap-2 shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-cyan-400"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>
                <span class="text-sm font-medium text-white">ä»£ç†åˆ†ç»„çŠ¶æ€</span>
            </div>
            
            <!-- å½“å‰å‡ºå£ä¿¡æ¯ -->
            <div id="geo-info" class="flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-slate-400 flex-1 justify-center min-w-0">
                <span class="shrink-0">ğŸ‡¸ğŸ‡¬</span>
                <span class="text-slate-300 truncate">æ–°åŠ å¡</span>
                <span class="text-slate-600 shrink-0">Â·</span>
                <span class="font-mono text-[11px] sm:text-xs text-slate-400 truncate">43.156.119.219</span>
                <span class="text-slate-600 shrink-0 hidden sm:inline">Â·</span>
                <span class="text-slate-500 text-[11px] sm:text-xs truncate hidden sm:inline">Tencent Cloud</span>
            </div>
            
            <!-- è®¾ç½®æŒ‰é’® -->
            <button onclick="toggleSettings()" class="p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors shrink-0" id="settings-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
            
            <!-- è®¾ç½®å¼¹çª— -->
            <div id="settings-modal" class="settings-modal absolute top-14 right-4 w-56 rounded-xl shadow-2xl p-3 hidden z-30">
                <h4 class="text-xs font-medium mb-2 text-slate-400">æ˜¾ç¤ºåˆ†ç»„</h4>
                <div class="space-y-0.5 max-h-52 overflow-y-auto" id="settings-list"></div>
            </div>
        </div>

        <!-- åˆ†ç»„ Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-3" id="groups-container"></div>
        
        <!-- ç©ºçŠ¶æ€ -->
        <div id="empty-state" class="hidden text-center py-10 text-slate-500 text-sm">
            æ²¡æœ‰æ˜¾ç¤ºçš„åˆ†ç»„
        </div>
    </div>
    
    <!-- èŠ‚ç‚¹é€‰æ‹©å¼¹çª— -->
    <div id="node-selector" class="node-selector fixed inset-0 bg-black/60 hidden z-40 flex items-center justify-center p-4">
        <div class="bg-neutral-900 rounded-2xl w-full max-w-sm max-h-[70vh] flex flex-col border border-white/10 shadow-2xl">
            <div class="p-4 border-b border-white/10 flex items-center justify-between">
                <h3 class="font-medium text-sm" id="selector-title">é€‰æ‹©èŠ‚ç‚¹</h3>
                <button onclick="closeNodeSelector()" class="text-slate-400 hover:text-white p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="p-2 overflow-y-auto flex-1" id="node-list"></div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const groups = [
            { id: 'proxy', name: 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©', node: 'é¦™æ¸¯ IPLC-01', latency: 45, nodes: ['é¦™æ¸¯ IPLC-01', 'é¦™æ¸¯ IPLC-02', 'æ–°åŠ å¡ AWS', 'æ—¥æœ¬ Linode', 'ç¾å›½ GCP'], show: true },
            { id: 'media', name: 'ğŸ¬ æµåª’ä½“', node: 'æ–°åŠ å¡ AWS', latency: 68, nodes: ['æ–°åŠ å¡ AWS', 'é¦™æ¸¯ NF', 'å°æ¹¾ Hinet', 'æ—¥æœ¬ IIJ'], show: true },
            { id: 'ai', name: 'ğŸ¤– AI æœåŠ¡', node: 'ç¾å›½ GCP-02', latency: 182, nodes: ['ç¾å›½ GCP-02', 'ç¾å›½ åŸç”Ÿ', 'æ—¥æœ¬ ChatGPT'], show: true },
            { id: 'telegram', name: 'ğŸ“± ç”µæŠ¥æ¶ˆæ¯', node: 'æ—¥æœ¬ Linode', latency: 56, nodes: ['æ—¥æœ¬ Linode', 'æ–°åŠ å¡ DO', 'é¦™æ¸¯ CMI'], show: true },
            { id: 'game', name: 'ğŸ® æ¸¸æˆåŠ é€Ÿ', node: 'é¦™æ¸¯ æ¸¸æˆä¸“çº¿', latency: 32, nodes: ['é¦™æ¸¯ æ¸¸æˆä¸“çº¿', 'æ—¥æœ¬ æ¸¸æˆ', 'å°æ¹¾ æ¸¸æˆ'], show: true },
            { id: 'microsoft', name: 'â“‚ï¸ å¾®è½¯æœåŠ¡', node: 'é¦™æ¸¯ Azure', latency: 42, nodes: ['é¦™æ¸¯ Azure', 'æ–°åŠ å¡ Azure', 'Direct'], show: false },
            { id: 'google', name: 'ğŸ” Google', node: 'å°æ¹¾ Hinet', latency: 88, nodes: ['å°æ¹¾ Hinet', 'æ—¥æœ¬ GCP', 'ç¾å›½ GCP'], show: false },
            { id: 'apple', name: 'ğŸ Apple', node: 'Direct', latency: 0, nodes: ['Direct', 'é¦™æ¸¯ IPLC-01', 'ç¾å›½ åŸç”Ÿ'], show: false },
        ];

        // å½“å‰å‡ºå£ä¿¡æ¯ (æ¨¡æ‹ŸAPIè¿”å›)
        // è‹±æ–‡API: http://ip-api.com/json
        // ä¸­æ–‡API: https://api.vore.top/api/IPdata
        const geoInfo = {
            ip: '43.156.119.219',
            flag: 'ğŸ‡¸ğŸ‡¬',
            country: 'Singapore',      // è‹±æ–‡
            countryZh: 'æ–°åŠ å¡',        // ä¸­æ–‡
            city: 'Singapore',
            isp: 'Tencent Cloud Computing',
            as: 'AS132203'
        };

        let currentGroupId = null;

        function getDelayClass(ms) {
            if (ms === 0) return 'bg-slate-500/10 text-slate-400';
            if (ms < 100) return 'delay-green';
            if (ms < 200) return 'delay-yellow';
            return 'delay-red';
        }

        function render() {
            const container = document.getElementById('groups-container');
            const settingsList = document.getElementById('settings-list');
            const emptyState = document.getElementById('empty-state');
            
            container.innerHTML = '';
            settingsList.innerHTML = '';

            let hasVisible = false;

            groups.forEach((g, index) => {
                // è®¾ç½®åˆ—è¡¨
                const item = document.createElement('label');
                item.className = 'flex items-center justify-between p-2 rounded-lg hover:bg-white/5 cursor-pointer text-xs';
                item.innerHTML = `
                    <span class="truncate text-slate-300">${g.name}</span>
                    <input type="checkbox" ${g.show ? 'checked' : ''} onchange="toggleGroup(${index})" class="w-3.5 h-3.5 rounded border-slate-600 bg-white/5 text-cyan-500 cursor-pointer">
                `;
                settingsList.appendChild(item);

                // åˆ†ç»„å¡ç‰‡
                if (g.show) {
                    hasVisible = true;
                    const card = document.createElement('div');
                    card.className = 'group-card p-3 flex flex-col gap-2';
                    
                    const isDirect = g.node === 'Direct';

                    card.innerHTML = `
                        <div class="flex items-center justify-between gap-2">
                            <span class="text-[11px] font-medium text-cyan-400 truncate">${g.name}</span>
                            <span class="delay-tag ${getDelayClass(g.latency)}">${g.latency > 0 ? g.latency + 'ms' : '-'}</span>
                        </div>
                        <button onclick="openNodeSelector('${g.id}')" class="text-left text-sm text-slate-200 hover:text-white truncate transition-colors flex items-center gap-1 group/btn" title="ç‚¹å‡»åˆ‡æ¢èŠ‚ç‚¹">
                            <span class="truncate">${g.node}</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="shrink-0 opacity-0 group-hover/btn:opacity-60 transition-opacity"><path d="m6 9 6 6 6-6"/></svg>
                        </button>
                    `;
                    container.appendChild(card);
                }
            });

            emptyState.classList.toggle('hidden', hasVisible);
        }

        function toggleGroup(index) {
            groups[index].show = !groups[index].show;
            render();
        }

        function toggleSettings() {
            document.getElementById('settings-modal').classList.toggle('hidden');
        }

        function openNodeSelector(groupId) {
            currentGroupId = groupId;
            const group = groups.find(g => g.id === groupId);
            if (!group) return;

            document.getElementById('selector-title').textContent = group.name;
            const list = document.getElementById('node-list');
            list.innerHTML = '';

            group.nodes.forEach(node => {
                const btn = document.createElement('button');
                const isActive = node === group.node;
                btn.className = `w-full text-left px-3 py-2.5 rounded-lg text-sm transition-colors flex items-center justify-between ${isActive ? 'bg-cyan-500/20 text-cyan-400' : 'hover:bg-white/5 text-slate-300'}`;
                btn.innerHTML = `
                    <span>${node}</span>
                    ${isActive ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>' : ''}
                `;
                btn.onclick = () => selectNode(groupId, node);
                list.appendChild(btn);
            });

            document.getElementById('node-selector').classList.remove('hidden');
        }

        function closeNodeSelector() {
            document.getElementById('node-selector').classList.add('hidden');
            currentGroupId = null;
        }

        function selectNode(groupId, node) {
            const group = groups.find(g => g.id === groupId);
            if (group) {
                group.node = node;
                group.latency = Math.floor(Math.random() * 150) + 20; // æ¨¡æ‹Ÿå»¶è¿Ÿ
                render();
            }
            closeNodeSelector();
        }

        // åˆå§‹åŒ–
        render();

        // ç‚¹å‡»å¤–éƒ¨å…³é—­
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('settings-modal');
            const btn = document.getElementById('settings-btn');
            if (!modal.contains(e.target) && !btn.contains(e.target)) {
                modal.classList.add('hidden');
            }
        });

        document.getElementById('node-selector').addEventListener('click', (e) => {
            if (e.target.id === 'node-selector') closeNodeSelector();
        });
    </script>
</body>
</html>
